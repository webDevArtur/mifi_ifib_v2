import { Link, useNavigate } from 'react-router-dom';
import { Button, Dropdown, Menu } from 'antd';
import styles from './UserMenu.module.scss';

interface UserMenuProps {
    isAuthenticated: boolean;
    logout: () => void;
}

export const UserMenu: React.FC<UserMenuProps> = ({ isAuthenticated, logout }) => {
    const navigate = useNavigate();

    function handleLogout() {
        navigate('/');
        logout();
    }

  const menu = (
    <Menu>
      <Menu.Item key="profile">
        <Link to="/profile">Профиль</Link>
      </Menu.Item>
      <Menu.Item key="logout" onClick={handleLogout}>
          Выйти
      </Menu.Item>
    </Menu>
  );

  return (
    <>
      {isAuthenticated && (
        <Dropdown overlay={menu} trigger={['hover']}>
            <Button className={styles.loginButton} type="primary">
              Пользователь
              <svg className={styles.loginButtonIcon} width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15 7.9925C15 3.85625 11.64 0.5 7.5 0.5C3.36 0.5 0 3.85625 0 7.9925C0 10.2706 1.035 12.3237 2.655 13.7019C2.67 13.7169 2.685 13.7169 2.685 13.7319C2.82 13.8369 2.955 13.9419 3.105 14.0469C3.18 14.0919 3.24 14.1509 3.315 14.2109C4.55494 15.0502 6.01771 15.4992 7.515 15.5C9.01229 15.4992 10.4751 15.0502 11.715 14.2109C11.79 14.1659 11.85 14.1069 11.925 14.0609C12.06 13.9569 12.21 13.8519 12.345 13.7469C12.36 13.7319 12.375 13.7319 12.375 13.7169C13.965 12.3228 15 10.2706 15 7.9925ZM7.5 14.5559C6.09 14.5559 4.8 14.1059 3.735 13.3569C3.75 13.2369 3.78 13.1178 3.81 12.9978C3.89968 12.6727 4.03075 12.3605 4.2 12.0688C4.365 11.7838 4.56 11.5288 4.8 11.3038C5.025 11.0788 5.295 10.8697 5.565 10.7047C5.85 10.5397 6.15 10.4197 6.48 10.3297C6.81267 10.2406 7.1556 10.1955 7.5 10.1956C8.52258 10.1879 9.50768 10.5802 10.245 11.2888C10.59 11.6337 10.86 12.0384 11.055 12.5028C11.16 12.7728 11.235 13.0575 11.28 13.3569C10.173 14.1351 8.85322 14.5538 7.5 14.5559ZM5.205 7.61844C5.0731 7.31575 5.00665 6.9886 5.01 6.65844C5.01 6.32937 5.07 5.99937 5.205 5.69938C5.34 5.39937 5.52 5.13031 5.745 4.90531C5.97 4.68031 6.24 4.50125 6.54 4.36625C6.84 4.23125 7.17 4.17125 7.5 4.17125C7.845 4.17125 8.16 4.23125 8.46 4.36625C8.76 4.50125 9.03 4.68125 9.255 4.90531C9.48 5.13031 9.66 5.40031 9.795 5.69938C9.93 5.99937 9.99 6.32937 9.99 6.65844C9.99 7.00344 9.93 7.31844 9.795 7.6175C9.66546 7.91347 9.48239 8.18299 9.255 8.4125C9.02541 8.63955 8.7559 8.8223 8.46 8.95156C7.84005 9.20579 7.14495 9.20579 6.525 8.95156C6.2291 8.8223 5.95959 8.63955 5.73 8.4125C5.50242 8.18624 5.32373 7.91659 5.205 7.61844ZM12.165 12.5928C12.165 12.5628 12.15 12.5478 12.15 12.5178C12.0027 12.0484 11.7853 11.604 11.505 11.1997C11.2245 10.7924 10.8801 10.4331 10.485 10.1356C10.1832 9.90849 9.85599 9.71721 9.51 9.56563C9.66667 9.46082 9.8124 9.34052 9.945 9.20656C10.1686 8.98578 10.365 8.73903 10.53 8.47156C10.8633 7.92625 11.035 7.29749 11.025 6.65844C11.0299 6.18546 10.938 5.71647 10.755 5.28031C10.5745 4.85999 10.3148 4.47835 9.99 4.15625C9.66489 3.83848 9.28337 3.58414 8.865 3.40625C8.42819 3.2233 7.95854 3.13173 7.485 3.13719C7.01139 3.13203 6.54174 3.22392 6.105 3.40719C5.68204 3.5829 5.29927 3.84287 4.98 4.17125C4.66058 4.49466 4.406 4.87621 4.23 5.29531C4.04698 5.73147 3.9551 6.20046 3.96 6.67344C3.96 7.00344 4.005 7.31812 4.095 7.6175C4.185 7.9325 4.305 8.2175 4.47 8.48656C4.62 8.75656 4.83 8.99656 5.055 9.22156C5.19 9.35656 5.34 9.47625 5.505 9.58062C5.15747 9.73534 4.83006 9.93178 4.53 10.1656C4.14 10.4656 3.795 10.8247 3.51 11.2147C3.22713 11.6175 3.00946 12.0623 2.865 12.5328C2.85 12.5628 2.85 12.5928 2.85 12.6078C1.665 11.4087 0.93 9.79062 0.93 7.9925C0.93 4.38125 3.885 1.42906 7.5 1.42906C11.115 1.42906 14.07 4.38125 14.07 7.9925C14.068 9.71746 13.3831 11.3715 12.165 12.5928Z" fill="white"/>
              </svg>
            </Button>
        </Dropdown>
      )}
    </>
  );
};
